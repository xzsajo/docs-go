import{_ as i,c as a,a3 as n,o as p}from"./chunks/framework.CAwIQbWu.js";const F=JSON.parse('{"title":"Nginx 常用命令及配置","description":"","frontmatter":{},"headers":[],"relativePath":"DevOps/Nginx/常用命令及配置.md","filePath":"DevOps/Nginx/常用命令及配置.md","lastUpdated":1730205143000}'),e={name:"DevOps/Nginx/常用命令及配置.md"};function l(h,s,t,k,r,d){return p(),a("div",null,s[0]||(s[0]=[n(`<h1 id="nginx-常用命令及配置" tabindex="-1">Nginx 常用命令及配置 <a class="header-anchor" href="#nginx-常用命令及配置" aria-label="Permalink to &quot;Nginx 常用命令及配置&quot;">​</a></h1><h2 id="nginx-工具" tabindex="-1">Nginx 工具 <a class="header-anchor" href="#nginx-工具" aria-label="Permalink to &quot;Nginx 工具&quot;">​</a></h2><p>Nginx 配置文件在线生成：<a href="https://nginxconfig.io/" target="_blank" rel="noreferrer">https://nginxconfig.io/</a></p><p>vscode 插件，与服务器连接</p><p>直接在 ide 里写 nginx 的配置</p><p>查看 nginx 配置是否有问题</p><p>nginx -t</p><p>重启 nginx</p><p>nginx -s reload</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reopen</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #重启Nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reload</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #重新加载Nginx配置文件，然后以优雅的方式重启Nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #强制停止Nginx服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> quit</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #优雅地停止Nginx服务（即处理完所有请求后再停止服务）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">,-h</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #打开帮助信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #显示版本信息并退出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -V</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #显示版本和配置选项信息，然后退出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #检测配置文件是否有语法错误，然后退出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -T</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #检测配置文件是否有语法错误，转储并退出</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -q</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #在检测配置文件期间屏蔽非错误信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prefix</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #设置前缀路径(默认是:/usr/share/nginx/)nginx -c filename #设置配置文件(默认是:/etc/nginx/nginx.conf)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directives</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #设置配置文件外的全局指令</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">killall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #杀死所有nginx进程</span></span></code></pre></div><p><a href="https://mp.weixin.qq.com/s/dte9oRimIWlZp0pd-ZF-WQ" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/s/dte9oRimIWlZp0pd-ZF-WQ</a></p><p>下面这以 ubuntu 为例，卸载安装 nginx</p><h3 id="卸载" tabindex="-1">卸载 <a class="header-anchor" href="#卸载" aria-label="Permalink to &quot;卸载&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 移除 nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --purge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查询 nginx 依赖的包，会列出来</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --get-selections</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 移除上面列出的包，例如 nginx-common</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --purge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-common</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 也可以执行 autoremove ，会自动删除不需要的包</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> autoremove</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查询 nginx 相关的文件，删掉就可以了</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span></code></pre></div><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">安装依赖库</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># gcc g++</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build-essential</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libtool</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># pcre</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libpcre3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libpcre3-dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># zlib</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib1g-dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ssl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libssl-dev</span></span></code></pre></div><p><strong>安装 nginx</strong></p><p>到 nginx download 上找到最新的nginx 版本</p><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li><a href="https://mp.weixin.qq.com/s?__biz=MzA4MjA1MDM3Ng==&amp;mid=2450810692&amp;idx=1&amp;sn=45f79149c19e72be93871ebcd21fcdde&amp;chksm=886b6b63bf1ce2754f1fa66e1b9c94b23d52cf0aebd8975987a329928dc400bb3bb1b454429f&amp;mpshare=1&amp;scene=1&amp;srcid=0921vqoZaexrktW8gYBiGQkG&amp;sharer_sharetime=1600683384522&amp;sharer_shareid=778ad5bf3b27e0078eb105d7277263f6&amp;key=b936ead840dca7f6b13b8ad3e509297601b88306d70b06eff4b9a17046e5ce3121abe7c1f95c4298905d8a6b9749f339b76a537b08d7bef5eef7b837fb3ee7789aeca827ac269ec91b33d194847be708ba2dbd0c295fc5a25b0acc7dda51504fad85f7813c3010cd608bb303f1d1e412fd1844195e303cca9d2d8b7b20b03f38&amp;ascene=1&amp;uin=MTA0NTY0NDM2MQ%3D%3D&amp;devicetype=Windows+10+x64&amp;version=62090529&amp;lang=zh_CN&amp;exportkey=ATdX8fy9b48Gn8z18lb36TA%3D&amp;pass_ticket=xUf5%2BvGpHQ4pHJ5PI9t9oMdDO1zJaase7Qo80EiFL9FDz3WdMpi2Qga4AztTBAsi&amp;wx_header=0" target="_blank" rel="noreferrer">Nginx常用配置总结</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzI5NjIzNjA1Nw==&amp;mid=2247483888&amp;idx=1&amp;sn=c2235eb2330e2c06c99281bf2c15b3a6&amp;chksm=ec462486db31ad902b52c9f9a9eef10e89328929544d6af7451d17bb799aa34a2a593306cd31&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;sharer_sharetime=1574174348607&amp;sharer_shareid=778ad5bf3b27e0078eb105d7277263f6#rd" target="_blank" rel="noreferrer">前端而须知的 nginx 技巧</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=Mzg3NTcwMTUzNA==&amp;mid=2247486249&amp;idx=1&amp;sn=8448800eb7eaa3963d532f6f576b305c&amp;source=41#wechat_redirect" target="_blank" rel="noreferrer">五分钟看懂 nginx 负债均衡</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzUxNzk1MjQ0Ng==&amp;mid=2247484991&amp;idx=2&amp;sn=a68e578591e2df254fa339aacc1ec9e2&amp;chksm=f99100eecee689f88e9e08fddc9ff42d0c88b8fd89c027b489005d28cf1950320f6e3b6cf1fd&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;sharer_sharetime=1585873416059&amp;sharer_shareid=778ad5bf3b27e0078eb105d7277263f6#rd" target="_blank" rel="noreferrer">详细的 nginx 配置 https 零基础教程</a></li><li><a href="https://github.com/jaywcjlove/nginx-tutorial" target="_blank" rel="noreferrer">Nginx安装维护入门学习笔记</a></li><li><a href="https://mp.weixin.qq.com/s/LmtHTOVOvdcnMBuxv7a9_A" target="_blank" rel="noreferrer">Nginx 最全操作总结</a></li></ul>`,20)]))}const c=i(e,[["render",l]]);export{F as __pageData,c as default};
