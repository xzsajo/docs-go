import{_ as i,c as a,a3 as e,o as l}from"./chunks/framework.CAwIQbWu.js";const o=JSON.parse('{"title":"实战：vercel部署node服务","description":"","frontmatter":{},"headers":[],"relativePath":"Node/Koa2/实战：vercel部署node服务.md","filePath":"Node/Koa2/实战：vercel部署node服务.md","lastUpdated":1736435697000}'),t={name:"Node/Koa2/实战：vercel部署node服务.md"};function n(p,s,h,k,r,d){return l(),a("div",null,s[0]||(s[0]=[e(`<h1 id="实战-vercel部署node服务" tabindex="-1">实战：vercel部署node服务 <a class="header-anchor" href="#实战-vercel部署node服务" aria-label="Permalink to &quot;实战：vercel部署node服务&quot;">​</a></h1><h2 id="引子" tabindex="-1">引子 <a class="header-anchor" href="#引子" aria-label="Permalink to &quot;引子&quot;">​</a></h2><p>之前在写<a href="https://docs-go.vercel.app/HTTP/HTTP%E7%BC%93%E5%AD%98.html" target="_blank" rel="noreferrer">面试常客：HTTP 缓存</a>时，曾经就强缓存和协商缓存写过两个 demo，但缓存要在服务端做，只能贴上代码，不能在网页上感受（虽然我贴了 gif）</p><p>笔者的所有 demo 例子都放在 github page 上，其特点是不需要服务器即可部署静态资源，但它不具备部署服务端应用能力</p><p>最近笔者在了解 CI/CD 方面的知识点，想起了 Vercel，就想着能否将服务端应用架在 vercel 上呢？</p><h2 id="vercel-是什么" tabindex="-1">Vercel 是什么 <a class="header-anchor" href="#vercel-是什么" aria-label="Permalink to &quot;Vercel 是什么&quot;">​</a></h2><p>Vercel 是一个开箱即用的网站托管平台，方便开发者快速部署自己的网站。它在全球都拥有 CND 节点，因此比 Github 官方自带的 github pages 更加稳定，访问速度更快</p><p><a href="https://space.bilibili.com/489667127" target="_blank" rel="noreferrer">Koala 聊开源</a> 曾经对其有过介绍：<a href="https://www.bilibili.com/video/BV1gR4y1u76v" target="_blank" rel="noreferrer">Vercel 与 Next.js：开源全明星团队背后的商业逻辑</a></p><blockquote><p>文字版：<a href="https://juejin.cn/post/7057333396359348255" target="_blank" rel="noreferrer">Vercel 与 Next.js：开源全明星团队背后的商业逻辑</a></p></blockquote><p>简单的说，它能极简部署应用到服务端，且是免费不用买服务器</p><h2 id="官网" tabindex="-1">官网 <a class="header-anchor" href="#官网" aria-label="Permalink to &quot;官网&quot;">​</a></h2><p><a href="https://vercel.com/" target="_blank" rel="noreferrer">Vercel 官网</a></p><p><a href="https://vercel.com/workflow" target="_blank" rel="noreferrer">Vercel 工作流官网</a>（网页效果炫酷）</p><h2 id="常见命令行" tabindex="-1">常见命令行 <a class="header-anchor" href="#常见命令行" aria-label="Permalink to &quot;常见命令行&quot;">​</a></h2><p>将 Vercel 下载到全局（<code>npm i vercel -g</code>），不知道有什么命令就<code>-h</code></p><p><img src="https://s2.loli.net/2022/05/07/zS3fFqLtiQvp6Oc.png" alt="vercel帮助"></p><p>笔者对其了解有限，这里罗列下笔者知道的命令</p><ul><li><code>vercel login</code>：登录 Vercel 账号</li><li><code>vercel dev</code>：本地开启服务</li><li><code>vercel dev --bug</code>：本地开启服务并打印日志</li><li><code>vercel</code>：部署本地资源到 Vercel 上</li><li><code>vercel --prod</code>：更新本地网页</li></ul><blockquote><p>vercel 可以用 vc 来代替，vc 是 Vercel 的缩写</p></blockquote><h2 id="部署静态服务" tabindex="-1">部署静态服务 <a class="header-anchor" href="#部署静态服务" aria-label="Permalink to &quot;部署静态服务&quot;">​</a></h2><p>我们现在已经对 vercel 有所了解，前文中说到 Vercel 能简化开发者部署服务，那它能简化到什么程度呢？</p><p>这里我们从零部署一个简易静态服务</p><p>本地安装 Vercel</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vercel</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span></span></code></pre></div><p>登录 Vercel</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vercel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> login</span></span></code></pre></div><p><img src="https://s2.loli.net/2022/05/07/Llg3ZO8iywrqEfv.png" alt="vercel login"></p><p>选择好连接的方式后，会在网站弹出</p><p><img src="https://s2.loli.net/2022/05/07/LVWO5CetKbfBHnU.png" alt="vercel 登录成功"></p><p>哟哟，man。what&#39;s your name？</p><p>创建一个 HTML 文件，后续我们要将其上传至 Vercel 服务器上</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> http-equiv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X-UA-Compatible&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;IE=edge&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Vercel Demo&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Vercel Demo&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>本地测试一番，输入命令行</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vercel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><p><img src="https://s2.loli.net/2022/05/07/CTj4uopQmbJGe9H.png" alt="vercel dev"></p><p>因为我们这是第一次执行，根目录下没有<code>.vercel</code>，所以要填写一些必要信息，这时你的本地和 Vercel 服务器就绑定好了</p><p>部署服务</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vercel</span></span></code></pre></div><p><img src="https://s2.loli.net/2022/05/07/eGn9HSkLqpFsC6l.png" alt="vercel部署"></p><p>在 <a href="https://vercel-sample-ten.vercel.app/" target="_blank" rel="noreferrer">https://vercel-sample-ten.vercel.app/</a> 中能访问到我们的静态服务</p><p>在截图中我们也看到了这句话<code>Deployed to production. Run vercel --prod to overwrite later</code>，后续我们要更新资源，用 <code>vercel --prod</code> 即可</p><p>好了，除去必要的登录，我们就用了三个命令就把本地服务部署到 Vercel 服务器上</p><ul><li><code>vercel dev</code> ：开发时使用，查看应用是否跑得起来</li><li><code>vercel</code>：部署服务</li><li><code>vercel --prod</code>：更新应用（资源）</li></ul><p>可以登录 <a href="https://vercel.com/dashboard" target="_blank" rel="noreferrer">Vercel 后台</a>查看部署情况</p><p><img src="https://s2.loli.net/2022/05/07/5XEJHlWz7QtxwGd.png" alt="vercel 后台"></p><h2 id="部署-node-服务" tabindex="-1">部署 Node 服务 <a class="header-anchor" href="#部署-node-服务" aria-label="Permalink to &quot;部署 Node 服务&quot;">​</a></h2><p>回归主题，最终我们想部署的是 Node 服务，是后端服务，而非前端静态资源服务，这是关键</p><p>同样建立新项目</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vercel-koa2</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vercel-koa2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> koa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span></code></pre></div><p>编写 <code>index.js</code> 中的内容</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Koa</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;koa&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Koa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ctx.body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Hello Vercel&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3008</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3008项目启动&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><blockquote><p>PS： 3000 端口默认会被 Vercel 使用，所以 Koa 服务要换个端口</p></blockquote><p>使用命令<code>vercel dev</code></p><p><img src="https://s2.loli.net/2022/05/07/z2C9gAl8yEuwtGL.png" alt="vercel koa dev"></p><p>发现给我报错了，理由是 <code>package.json</code> 的 scripts 中没有 build 快捷符，修改之</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span></code></pre></div><p>再次使用 <code>vercel dev</code>，node 服务跑起来了</p><p>于是乎我们部署它</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vercel</span></span></code></pre></div><p><img src="https://s2.loli.net/2022/05/07/NDM5q2vj8LlFTo3.png" alt="vercel 部署失败"></p><p>搞半天没部署上去，后台查看也是无果，呜呼悲哉</p><p>google 后，发现原来还有一个 <a href="https://vercel.com/docs/project-configuration" target="_blank" rel="noreferrer">vercel.json</a>，可以用 vercel.json 配置和覆盖 vercel 默认行为</p><p>下载 <code>@vercel/node</code> 包</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @vercel/node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span></span></code></pre></div><p>填写配置：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;builds&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;use&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@vercel/node&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>执行 <code>vercel</code> 部署服务</p><p><img src="https://s2.loli.net/2022/05/07/7ErKfp5QbMLjymd.png" alt="vercel koa"></p><p>访问地址：<a href="https://vercel-koa2-t511069160.vercel.app" target="_blank" rel="noreferrer">https://vercel-koa2-t511069160.vercel.app</a></p><p>至此，就完成了 Koa 服务的部署</p><p>与部署静态资源多了两个步骤</p><p>下载 <code>@vercel/node</code> 和配置 <code>vercel.json</code></p><h2 id="延伸思考" tabindex="-1">延伸思考 <a class="header-anchor" href="#延伸思考" aria-label="Permalink to &quot;延伸思考&quot;">​</a></h2><p>Vercel 当然不止笔者所说的这一功能，它还可以自定义域名、serverless、全球支持的 CDN 等等</p><p>可以毫不夸张地说，用 Vercel 来代替繁琐的云服务器，配合 Github Action 做 CI/CD，就</p><p>个人开发者或小团队而言，这或许就是神器</p><p>后续笔者也会尝试用 Vercel 部署一些小应用，实践出真理</p><p>附上项目地址：<a href="https://github.com/johanazhu/vercel-demo" target="_blank" rel="noreferrer">https://github.com/johanazhu/vercel-demo</a></p><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li><a href="https://tangly1024.com/article/vercel-free-serverless-api" target="_blank" rel="noreferrer">Vercel 搭建 API 服务，无需服务器</a></li><li><a href="https://juejin.cn/post/7057333396359348255" target="_blank" rel="noreferrer">Vercel 与 Next.js：开源全明星团队背后的商业逻辑：文字版</a></li><li><a href="https://www.bilibili.com/video/BV1gR4y1u76v" target="_blank" rel="noreferrer">Vercel 与 Next.js：开源全明星团队背后的商业逻辑：视频版</a></li></ul>`,80)]))}const E=i(t,[["render",n]]);export{o as __pageData,E as default};
